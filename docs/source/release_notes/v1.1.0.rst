.. _release_v1_1_0:

----------------
Version 1.1.0
----------------
*(Released: 2025-08-09)*

A feature-focused release adding a full **reliability diagram**
workflow for classification calibration, broader docs, and stronger
testsâ€”while keeping the public API stable.

Highlights |Feature|
~~~~~~~~~~~~~~~~~~~~

* |Feature| New calibration plotting:
  :func:`~kdiagram.plot.comparison.plot_reliability_diagram`
  for one-or-many models with **uniform/quantile binning**, **sample
  weights**, **Wilson/normal CIs**, **ECE/Brier** reporting,
  **counts panel**, and **per-bin data export**.

New Features |New|
~~~~~~~~~~~~~~~~~~

* |New| :func:`~kdiagram.plot.comparison.plot_reliability_diagram`
  (binary classification):
  - Multi-model overlay with shared or custom styles.
  - Binning: ``strategy={'uniform','quantile'}``, configurable
    ``n_bins``; robust handling of duplicate quantiles.
  - Probabilities:
    1D positive-class probs or 2D ``(n_samples, n_classes)`` with
    ``class_index``; optional clipping/normalization safeguards.
  - Uncertainty bands: ``error_bars={'wilson','normal','none'}``
    (95% by default).
  - Metrics on-plot: **ECE** and **Brier** (weighted when
    ``sample_weight`` provided).
  - Auxiliary counts panel (bottom) with fractional or raw counts.
  - Consistent theming knobs (``cmap``, ``color_palette``, markers,
    alpha, linewidths, grid).
  - ``return_data=True`` returns a per-model DataFrame of per-bin
    statistics for programmatic inspection.
  - API/params aligned with the rest of ``kdiagram.plot.*`` (e.g.,
    ``names``, ``show_grid``, ``grid_props``, ``savefig``).

Enhancements |Enhancement|
~~~~~~~~~~~~~~~~~~~~~~~~~~

* |Enhancement| Internal helpers (underscored) split out within
  ``kdiagram.plot.comparison`` for clearer testing and maintenance
  (binning, metrics, CIs, style assembly, validations).
* |Enhancement| More consistent color handling across comparison
  plots (respecting explicit palettes first, then ``cmap``).
* |Enhancement| Better edge-case handling:
  - Degenerate bins, tiny/empty bins, constant predictions,
    near-boundary probabilities (0/1).
  - Safer numerical ops for ECE/Brier with weights.

API Changes |API Change|
~~~~~~~~~~~~~~~~~~~~~~~~

* |API Change| **None (backward compatible).** The new function is
  additive. Existing functions keep defaults and signatures.

Bug Fixes |Fix|
~~~~~~~~~~~~~~~

* |Fix| Minor consistency fixes in comparison plotting defaults
  (legends, grid props) to match package-wide conventions.
* |Fix| More informative warnings for unsupported/ignored options
  (e.g., unexpected colormap names, mismatched ``names`` length).

Documentation |Docs|
~~~~~~~~~~~~~~~~~~~~

* |Docs| Gallery:
  - Added **Model Reliability Diagram** example section in
    ``gallery/comparison.rst`` (with interpretation notes).
* |Docs| User Guide:
  - Added a full **Calibration / Reliability** guide to
    ``user_guide/comparison.rst`` including math, ECE/Brier
    definitions, binning strategies, and interpretation tips.
* |Docs| Release Notes:
  - Introduced ``docs/source/release_notes/index.rst`` and entries
    for ``v1.0.0``, ``v1.0.3``, and **v1.1.0**.
* |Docs| Badges:
  - Added reusable badge roles in ``conf.py`` (success/danger/info/
    warning/primary/secondary/purple/fix) and shortcuts like
    ``|Feature|``, ``|Fix|``, ``|Enhancement|`` for release notes.

Testing & QA |Tests|
~~~~~~~~~~~~~~~~~~~~

* |Tests| New ``tests/test_plot_reliability_diagram.py`` covering:
  - Single & multi-model overlays.
  - Uniform vs. quantile binning; small/degenerate bins.
  - Error bars: ``wilson``, ``normal``, ``none``.
  - ``sample_weight`` paths, clipping/normalization, ``class_index``
    for 2D proba, NaN dropping.
  - ``return_data=True`` schema and values.
  - Counts panel rendering and legend text with ECE/Brier.
* |Build| Increased coverage over helpers and edge conditions.

Deprecations
~~~~~~~~~~~~

* **None.**

Migration Notes
~~~~~~~~~~~~~~~

* No changes required. The release is additive and backwards compatible.
